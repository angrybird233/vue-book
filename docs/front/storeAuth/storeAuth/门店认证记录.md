# 门店认证列表

开发者：cp

## 接口地址

`/store-auth/v1/front/logList`

## 请求方式

`POST`

## 请求参数

| 字段 | 类型   | 必填 | 描述     |
| ---- | ------ | ---- | -------- |
| store_code  | string    | 是   | 门店编码   |

## 成功响应

| 字段       | 类型    | 描述        |
| ---------- | ------- | ----------- |
| status    | string  | 状态    |
| httpCode     | int  | http状态码    |
| statusCode | int  | 状态码 |
| requestId | string  | 请求ID |
| data  | array  | 返回数据      |

## 失败响应

| 字段       | 类型    | 描述        |
| ---------- | ------- | ----------- |
| status    | string  | 状态    |
| httpCode     | int  | http状态码    |
| statusCode | int  | 状态码 -999：没有门店列表权限 |
| requestId | string  | 请求ID |
| message  | string  | 错误信息      |

### data参数

| 字段 | 类型 | 描述 |
| --- | --- | --- |
| data | array | 数据列表 |

#### data参数

| 字段 | 类型 | 描述 |
| --- | --- | --- |
| store_code | string | 门店编码 |
| audit_username | string | 审核人 |
| audit_time | string | 审核时间 |
| audit_type | string | 审核类型 |
| audit_status | string | 审核状态 |


## 返回结果预览

```json
{
    "status": "success",
    "httpCode": 200,
    "statusCode": 0,
    "requestId": "API_8c48d76c77f8182848effb083d9d157a",
    "data": [
        {
            "audit_time": "2021/03/03 14:43",
            "audit_type": "经销商审核",
            "audit_status": "驳回",
            "audit_username": "管理员"
        },
        {
            "audit_time": "2021/03/03 11:23",
            "audit_type": "经销商审核",
            "audit_status": "驳回",
            "audit_username": ""
        }
    ]
}
```
## 备注：距离最近排序距离算法
### 算法一 （半正矢公式计算两点距离）

```sql
ROUND(
        6378.137 * 2 * ASIN(
            SQRT(
                POW(
                    SIN(
                        (
                            {$longitude} * PI() / 180 - `longitude` * PI() / 180
                        ) / 2
                    ),
                    2
                ) + COS({$longitude} * PI() / 180) * COS(`longitude` * PI() / 180) * 
                POW(
                    SIN(
                        (
                            {$latitude} * PI() / 180 - `latitude` * PI() / 180
                        ) / 2
                    ),
                    2
                )
            )
        ) * 1000
    )
```
### 算法二 （美团优化方案：简化距离计算公式方法，当前使用）缺点：260多千米，两个方法差别17m ，优点：100w数据查询只需11ms原来的需要144ms
```sql
ROUND(
        SQRT(
            POW(
                ({$longitude} - `longitude`) * PI() / 180 
                * 6378137.0 
                * COS(({$latitude}+`latitude`) / 2.0 * PI() / 180)
            , 2)
            +
            POW(
                ({$latitude} - `latitude`) * PI() / 180 
                * 6378137.0
            , 2)
        )
    )
```



